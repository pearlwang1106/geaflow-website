"use strict";(self.webpackChunkgeaflow_website=self.webpackChunkgeaflow_website||[]).push([[254],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>t});var l=s(96540);const r={},i=l.createContext(r);function o(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),l.createElement(i.Provider,{value:n},e.children)}},91530:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"quick_start/quick_start_sql_to_graph","title":"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u67e5\u8be2","description":"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9Join","source":"@site/versions/version-current/docs-cn/source/3.quick_start/4.quick_start_sql_to_graph.md","sourceDirName":"3.quick_start","slug":"/quick_start/quick_start_sql_to_graph","permalink":"/geaflow-website/docs/zh/quick_start/quick_start_sql_to_graph","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u8fd1\u7ebf\u63a8\u7406udf\u90e8\u7f72","permalink":"/geaflow-website/docs/zh/quick_start/quick_start_infer&UDF"},"next":{"title":"\u540d\u8bcd\u89e3\u91ca","permalink":"/geaflow-website/docs/zh/concepts/glossary"}}');var r=s(74848),i=s(28453);const o={},t="\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u67e5\u8be2",c={},d=[{value:"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9Join",id:"\u4f7f\u7528sql\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9join",level:2},{value:"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9Join\u805a\u5408\u67e5\u8be2",id:"\u4f7f\u7528sql\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9join\u805a\u5408\u67e5\u8be2",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u4f7f\u7528sql\u8fdb\u884c\u56fe\u67e5\u8be2",children:"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u67e5\u8be2"})}),"\n",(0,r.jsx)(n.h2,{id:"\u4f7f\u7528sql\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9join",children:"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9Join"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fd0\u884c\u811a\u672c\uff0c\u63d0\u4ea4\u5df2\u7ecf\u7f16\u8f91\u597d\u7684demo GQL:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"bin/gql_submit.sh --gql geaflow/geaflow-examples/gql/sql_join_to_graph_demo.sql\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u4e2d sql_join_to_graph_demo.sql \u662f\u4e00\u6bb5\u5728\u6a21\u62df\u6d41\u56fe\u4e2d\u7684SQL Join\u67e5\u8be2\uff0c\u5176\u5173\u952e\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"USE GRAPH dy_modern;\n\nselect u.name, friend.name\nfrom person u, knows e, person friend\nwhere u.id = e.srcId and e.targetId = friend.id\n;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8be5 DSL \u4f1a\u4ece\u9879\u76ee\u4e2d\u7684 resource \u6587\u4ef6 ",(0,r.jsx)(n.strong,{children:"demo_job_data.txt"})," \u4e2d\u8bfb\u53d6\u70b9\u8fb9\u6570\u636e\uff0c\u8fdb\u884c\u6784\u56fe\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7136\u540e\u5728\u56fe",(0,r.jsx)(n.code,{children:"dy_modern"}),"\u4e0a\u6267\u884c\u70b9\u4e0e\u8fb9\u7684Join\u67e5\u8be2\uff0c\u5f15\u64ce\u89e3\u6790Join\u8bed\u4e49\u540e\u81ea\u52a8\u8f6c\u4e3a\u56fe\u7684\u67e5\u8be2\u3002"]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u53ef\u4ee5\u6253\u5370\u7ed3\u679c\u6587\u4ef6\u7684\u5185\u5bb9\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cat /tmp/geaflow/sql_join_to_graph_demo_result/partition_0  \n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u8be2\u7ed3\u679c\u9ed8\u8ba4\u5199\u5165",(0,r.jsx)(n.code,{children:"/tmp/geaflow/sql_join_to_graph_demo_result"}),", \u7528\u6237\u4e5f\u53ef\u901a\u8fc7\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"geaflow.dsl.file.path"})," \u53c2\u6570\u81ea\u5b9a\u4e49\u8f93\u51fa\u8def\u5f84\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"jim,jim\nkate,kate\nlily,lily\nlucy,lucy\njim,jim\nlucy,lucy\nlucy,lucy\njack,jack\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u4f7f\u7528sql\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9join\u805a\u5408\u67e5\u8be2",children:"\u4f7f\u7528SQL\u8fdb\u884c\u56fe\u7684\u70b9\u4e0e\u8fb9Join\u805a\u5408\u67e5\u8be2"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u8fd0\u884c\u811a\u672c\uff0c\u63d0\u4ea4\u5df2\u7ecf\u7f16\u8f91\u597d\u7684demo GQL:"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"bin/gql_submit.sh --gql geaflow/geaflow-examples/gql/sql_join_to_graph_demo_02.sql\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u5176\u4e2d sql_join_to_graph_demo_02.sql \u5173\u952e\u5185\u5bb9\u5982\u4e0b\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"USE GRAPH dy_modern;\n\nSELECT    u.name,\n          friend_num\nFROM      person u,\n          (\n          SELECT    srcId AS pid,\n                    COUNT(DISTINCT targetId) AS friend_num\n          FROM      knows\n          GROUP BY  srcId\n          ) t_friend_num\nWHERE     u.id = pid;\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u8be5 DSL \u4f1a\u4ece\u9879\u76ee\u4e2d\u7684 resource \u6587\u4ef6 ",(0,r.jsx)(n.strong,{children:"demo_job_data.txt"})," \u4e2d\u8bfb\u53d6\u70b9\u8fb9\u6570\u636e\uff0c\u8fdb\u884c\u6784\u56fe\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:["\u7136\u540e\u5728\u56fe",(0,r.jsx)(n.code,{children:"dy_modern"}),"\u4e0a\u6267\u884c\u70b9\u4e0e\u8fb9\u7684Join\u67e5\u8be2\uff0c\u5f15\u64ce\u89e3\u6790Join\u8bed\u4e49\u540e\u81ea\u52a8\u8f6c\u4e3a\u56fe\u7684\u67e5\u8be2\u3002"]}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u8f93\u51fa\u7ed3\u679c\u5982\u4e0b"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u53ef\u4ee5\u6253\u5370\u7ed3\u679c\u6587\u4ef6\u7684\u5185\u5bb9\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cat /tmp/geaflow/sql_join_to_graph_demo_02_result/partition_0  \n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u67e5\u8be2\u7ed3\u679c\u9ed8\u8ba4\u5199\u5165",(0,r.jsx)(n.code,{children:"/tmp/geaflow/sql_join_to_graph_demo_02_result"}),", \u7528\u6237\u4e5f\u53ef\u901a\u8fc7\u4fee\u6539 ",(0,r.jsx)(n.code,{children:"geaflow.dsl.file.path"})," \u53c2\u6570\u81ea\u5b9a\u4e49\u8f93\u51fa\u8def\u5f84\u3002"]}),"\n",(0,r.jsx)(n.p,{children:"\u7ed3\u679c\u663e\u793a\u4e86\u56fe\u4e2d\u8bb0\u5f55\u7684\u6bcf\u4e2a\u4eba\u7684\u670b\u53cb\u6570\u3002"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"lucy,2\njim,1\nkate,1\nlily,1\njack,1\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);