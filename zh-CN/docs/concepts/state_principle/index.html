<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-en-current docs-version-current docs-doc-page docs-doc-id-concepts/state_principle" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Introduction to State Principles | GeaFlow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/concepts/state_principle"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" property="og:title" content="Introduction to State Principles | GeaFlow"><meta data-rh="true" name="description" content="State Management in Geaflow"><meta data-rh="true" property="og:description" content="State Management in Geaflow"><link data-rh="true" rel="icon" href="/geaflow-website/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/concepts/state_principle"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/concepts/state_principle" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/concepts/state_principle" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/concepts/state_principle" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HO4M21RAQI-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Introduction to State Principles","item":"https://kaiming-l.github.io/geaflow-website/zh-CN/docs/concepts/state_principle"}]}</script><link rel="alternate" type="application/rss+xml" href="/geaflow-website/zh-CN/blog/rss.xml" title="GeaFlow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/geaflow-website/zh-CN/blog/atom.xml" title="GeaFlow Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="GeaFlow" href="/geaflow-website/zh-CN/opensearch.xml">





<meta name="algolia-site-verification" content="4AB782AC2021573E">
<meta property="og:image" content="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*PkdvSLd2A6kAAAAAQMAAAAgAep_eAQ/original"><link rel="stylesheet" href="/geaflow-website/zh-CN/assets/css/styles.b78ac409.css">
<script src="/geaflow-website/zh-CN/assets/js/runtime~main.6b25ddec.js" defer="defer"></script>
<script src="/geaflow-website/zh-CN/assets/js/main.209f331b.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/geaflow-website/zh-CN/img/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/geaflow-website/zh-CN/"><div class="navbar__logo"><img src="/geaflow-website/zh-CN/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/geaflow-website/zh-CN/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="versionSelect_qA4O"><div class="versions_jk5T"><div class="selectItem_V7J8 selectItemActive_BNvF">0.0.2</div><div class="selectItem_V7J8">0.0.1</div></div><div class="current_ORt9">0.0.2</div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link header-locale-dropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/geaflow-website/docs/concepts/state_principle" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/geaflow-website/zh-CN/docs/concepts/state_principle" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li></ul></div><a href="https://github.com/apache/geaflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbarCenter_ZzI1"> <a aria-current="page" class="navbar__item navbar__link navbar__link--active" id="docs" href="/geaflow-website/zh-CN/docs/zh/guide">文档</a><a class="navbar__item navbar__link" id="community" href="/geaflow-website/zh-CN/community/zh/how_to_contribute">社区</a><a class="navbar__item navbar__link" href="/geaflow-website/zh-CN/download">下载</a><a class="navbar__item navbar__link" href="/geaflow-website/zh-CN/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">基金会</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">许可证</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">事件</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">隐私</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">安全</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">赞助</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">感谢</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">行为准则</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/guide">Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/quick_start/quick_start">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/geaflow-website/zh-CN/docs/concepts/glossary">Concepts</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/concepts/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/concepts/dsl_principle">DSL Principle Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/concepts/framework_principle">Framework Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/geaflow-website/zh-CN/docs/concepts/state_principle">Introduction to State Principles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/concepts/console_principle">GeaFlow Console Platform</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/application-development/api/overview">Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/deploy/install_guide">Deployment</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/contribution">Contribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/contacts">Contacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/thanks">Thanks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/reference/vs_join">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/geaflow-website/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Introduction to State Principles</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction to State Principles</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-management-in-geaflow">State Management in Geaflow<a href="#state-management-in-geaflow" class="hash-link" aria-label="State Management in Geaflow的直接链接" title="State Management in Geaflow的直接链接">​</a></h2>
<p>In Geaflow, state refers to the intermediate calculation results of directly calculated nodes during graph and flow computation processes. This intermediate result may be organized source data information or some results generated by calculation. State management is responsible for the storage and access of this data as well as consistency assurance. As the central data hub of Geaflow, its functional model, performance, and reliability directly affect the entire use process of Geaflow, and it is the foundation of the entire system.</p>
<ul>
<li>
<p>In terms of the function, it supports Geaflow&#x27;s real-time, multi-mode dynamic graph engine, including low-latency flow graph fusion computation, high-performance long-cycle graph simulation, large-scale dynamic graph exploration, and more.</p>
</li>
<li>
<p>In terms of the computation model, the state management in Geaflow belongs to the combination of real-time model and graph model. It needs to overcome the processing mechanism with state in real-time computing, low latency, fault tolerance, and recovery mechanisms. Additionally, it also needs to solve the problems of complex data, high association, data-driven computation, and large intermediate results in graph models.</p>
</li>
<li>
<p>In terms of performance, state management needs to solve the problem of achieving high throughput and low-latency storage and query capabilities under the premise of low cost, multiple scenarios, and large-scale data. This includes accessing data at the scale of trillions of edges, accessing larger attribute information, and random and traversal access with multiple pushdown semantics.</p>
</li>
</ul>
<p>Therefore, we have the following architecture diagram, which is flexible and supports multiple pluggable components.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-architecture">State Architecture<a href="#state-architecture" class="hash-link" aria-label="State Architecture的直接链接" title="State Architecture的直接链接">​</a></h3>
<p><img decoding="async" loading="lazy" alt="state_arch" src="/geaflow-website/zh-CN/assets/images/state_arch_new-d419a2e40116f97094862b53bebaf776.png" width="2232" height="446" class="img_ev3q"></p>
<ul>
<li><strong>State API</strong>: Provides an API for key-value storage operations, such as get/put/delete. It also provides APIs for graph storage, such as V/E/VE, and operations for adding/updating/deleting vertices and edges.</li>
<li><strong>State Execution Layer</strong>: Implements data sharding and scalability through the design of KeyGroups. Accessor provides IO abstractions for different read/write strategies and data models. StateOperator abstracts the storage layer SPI, including operations like finish (flushing to disk), archive (checkpoint), compact (compression), recover (recovery), etc. Additionally, State provides various pushdown optimizations to accelerate IO access efficiency. Customized memory management and attribute-based secondary indexing are also provided for storage access optimization.</li>
<li><strong>Store Layer</strong>: GeaFlow supports multiple types of storage systems and encapsulates schemas, serializers, and
data version information through StoreContext. This layer deals with how in-memory data structures are mapped to storage structures. Currently, storage engines include Redis, Rocksdb (GeaFlow&#x27;s proprietary storage system), which provide services through SPI. Depending on the characteristics of the storage engine, they may support different data models. For example, all data structures in Rocksdb need to be mapped to key-value pairs, while Redis inherently provides advanced data structures like lists/maps.</li>
<li><strong>Persistence Layer</strong>: GeaFlow State itself does not provide persistence capability. If a machine failure or disk corruption occurs, data loss may happen. Therefore, it relies on external components to provide persistence storage. These components are also pluggable and can support distributed file storage or object storage, such as HDFS/OSS/S3, etc.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="state-operational-process">State Operational Process<a href="#state-operational-process" class="hash-link" aria-label="State Operational Process的直接链接" title="State Operational Process的直接链接">​</a></h2>
<p>The life of State shows below:</p>
<p><img decoding="async" loading="lazy" alt="state_flow" src="/geaflow-website/zh-CN/assets/images/state_flow-1d20c7f8a4157ef55cc8ba4579ca9391.png" width="1429" height="487" class="img_ev3q"></p>
<p>When failOver happens, it will recover from the last persistent data. The following is the detailed process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-creation">State Creation<a href="#state-creation" class="hash-link" aria-label="State Creation的直接链接" title="State Creation的直接链接">​</a></h3>
<p>The data processed by State is already divided into each partition dimension by the framework layer.</p>
<p>All State requests go through the StateFactory, and different States can be requested based on different Descriptors.</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildGraphState(GraphStateDescriptor, Configuration):GraphState</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildKeyValueState(KeyValueStateDescriptor, Configuration):KeyValueState</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildKeyListState(KeyListDescriptor, Configuration):KeyListState</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">buildKeyMapState(KeyMapStateDescriptor, Configuration):KeyMapState</span><br></span></code></pre></div></div>
<p>The Descriptor needs to declare basic information, including State name, Store type, etc. Different State names correspond to isolated States, and different States can be requested to represent different scenarios. For example, a Memory Store State can be requested as a temporary storage or calculation intermediate.</p>
<p>The choice of Store type is closely related to storage performance. For example, for Key State, if the underlying Store supports the KMap method, it will directly use the functions of KMap, which can perform incremental subkey operations. If it does not support KMap, it will be converted to a KV-model State, and the entire Map will be operated on, which will greatly magnify the size of both read and write operations.</p>
<p>After creation, we also need to read and write to the State.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-read-and-write">State Read and Write<a href="#state-read-and-write" class="hash-link" aria-label="State Read and Write的直接链接" title="State Read and Write的直接链接">​</a></h3>
<p>Depending on the different types of State requested as mentioned above, they have different ways of reading and writing, which will be discussed in the end of the document.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-persistency">State Persistency<a href="#state-persistency" class="hash-link" aria-label="State Persistency的直接链接" title="State Persistency的直接链接">​</a></h3>
<p>In a computing task, if there is an exceptional circumstance such as a machine failure, the state data stored on the disk can be lost. To enable normal rollback, State also needs to consider the ability of persistence, so that the machine that is reassigned can retrieve the State data and continue computing.</p>
<p>In each computing task, users need to periodically do a checkpoint to persist the data and ensure the safety of the state data. This can be done after a batch of tasks is completed, or after the derivative task is completed. The timing of the checkpoint should be consistent with the source offset. Only when both the state checkpoint and source offset are saved, can it be considered that all state data of this job has been persisted.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="state-recovery">State Recovery<a href="#state-recovery" class="hash-link" aria-label="State Recovery的直接链接" title="State Recovery的直接链接">​</a></h3>
<p>When an exception occurs, the framework layer will perform FailOver, and State will automatically roll back to the latest state. Depending on the choice of the persistence layer as mentioned above, State data will be retrieved and loaded from the corresponding distributed file storage or object storage.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-types-of-state">The Types of State<a href="#the-types-of-state" class="hash-link" aria-label="The Types of State的直接链接" title="The Types of State的直接链接">​</a></h2>
<p>State can be roughly divided into Graph State and Key State, corresponding to different data structures and mapping to different storage models in the Store layer. For example, for the store type of Rocksdb, there will be different types of storage models such as KV and Graph.</p>
<p><img decoding="async" loading="lazy" alt="state_type" src="/geaflow-website/zh-CN/assets/images/state_type-d6781576f91671f15511f483ffeda59d.png" width="916" height="445" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graph-state">Graph State<a href="#graph-state" class="hash-link" aria-label="Graph State的直接链接" title="Graph State的直接链接">​</a></h3>
<p>Graph State can be further classified into StaticGraph and DynamicGraph, based on whether it is a dynamic graph or not.
The difference is that StaticGraph treats the entire graph as a complete one, and all operations are performed on the complete graph.
On the other hand, DynamicGraph considers the graph to be dynamic, consisting of slice graphs that form a complete graph.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="static-graph-state">Static Graph State<a href="#static-graph-state" class="hash-link" aria-label="Static Graph State的直接链接" title="Static Graph State的直接链接">​</a></h4>
<p>StaticGraphState API is divided into several parts, including query, upsert, delete, and manage.</p>
<ul>
<li>
<p>query: Graph query, which allows users to flexibly query GraphState from multiple dimensions such as nodes, edges, nodes and outbound edges. It can be a random or global query, and different pushdown conditions can be added. The final return value can be an iterator or a list.</p>
</li>
<li>
<p>upsert: Adding nodes or edges.</p>
</li>
<li>
<p>delete: Deleting a certain node or ID.</p>
</li>
<li>
<p>manage: Divided into operator and other operations. Operator is the data operation of the State, which can perform flushing persistence or recovery. Other operations include obtaining information such as summary and metrics.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-graph-state">Dynamic Graph State<a href="#dynamic-graph-state" class="hash-link" aria-label="Dynamic Graph State的直接链接" title="Dynamic Graph State的直接链接">​</a></h4>
<p>DynamicGraphState API is similar to StaticGraphState, but each node and edge is associated with a version number.</p>
<p>At the same time, Dynamic Graph State also adds version-related queries, which can obtain all versions or the latest version corresponding to certain nodes, and can obtain the specific values of each version.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-state">Key State<a href="#key-state" class="hash-link" aria-label="Key State的直接链接" title="Key State的直接链接">​</a></h3>
<p>KeyState API is divided into several parts, including:</p>
<ul>
<li>KeyValueState</li>
<li>KeyListState</li>
<li>KeyMapState</li>
</ul>
<p>Each corresponds to a different user-level data structure. Similar to GraphState, KeyState also provides the ability to query, upsert, delete, and manage, but the query does not provide complex query semantic information like GraphState. Different State data structures have differences in querying and storage. For example, KMap allows modification and querying of a single subkey, while KV modifies and queries the entire value.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/geaflow-website/zh-CN/docs/concepts/framework_principle"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Framework Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/geaflow-website/zh-CN/docs/concepts/console_principle"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">GeaFlow Console Platform</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#state-management-in-geaflow" class="table-of-contents__link toc-highlight">State Management in Geaflow</a><ul><li><a href="#state-architecture" class="table-of-contents__link toc-highlight">State Architecture</a></li></ul></li><li><a href="#state-operational-process" class="table-of-contents__link toc-highlight">State Operational Process</a><ul><li><a href="#state-creation" class="table-of-contents__link toc-highlight">State Creation</a></li><li><a href="#state-read-and-write" class="table-of-contents__link toc-highlight">State Read and Write</a></li><li><a href="#state-persistency" class="table-of-contents__link toc-highlight">State Persistency</a></li><li><a href="#state-recovery" class="table-of-contents__link toc-highlight">State Recovery</a></li></ul></li><li><a href="#the-types-of-state" class="table-of-contents__link toc-highlight">The Types of State</a><ul><li><a href="#graph-state" class="table-of-contents__link toc-highlight">Graph State</a></li><li><a href="#key-state" class="table-of-contents__link toc-highlight">Key State</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/zh-CN/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/zh-CN/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>