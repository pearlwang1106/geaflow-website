<!doctype html>
<html lang="zh-CN" dir="ltr" class="docs-wrapper plugin-docs plugin-id-en-current docs-version-current docs-doc-page docs-doc-id-application-development/api/graph/compute" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Graph Compute Introduction | GeaFlow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/application-development/api/graph/compute"><meta data-rh="true" property="og:locale" content="zh_CN"><meta data-rh="true" property="og:locale:alternate" content="en_US"><meta data-rh="true" name="docusaurus_locale" content="zh-CN"><meta data-rh="true" name="docsearch:language" content="zh-CN"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" property="og:title" content="Graph Compute Introduction | GeaFlow"><meta data-rh="true" name="description" content="GeaFlow provides interfaces for implementing graph computing algorithms, and static or dynamic graph computing can be performed by implementing the corresponding interfaces. Users can define specific computing logic and maximum iteration times in the compute algorithm."><meta data-rh="true" property="og:description" content="GeaFlow provides interfaces for implementing graph computing algorithms, and static or dynamic graph computing can be performed by implementing the corresponding interfaces. Users can define specific computing logic and maximum iteration times in the compute algorithm."><link data-rh="true" rel="icon" href="/geaflow-website/zh-CN/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/application-development/api/graph/compute"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/graph/compute" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/application-development/api/graph/compute" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/graph/compute" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HO4M21RAQI-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Graph Compute Introduction","item":"https://kaiming-l.github.io/geaflow-website/zh-CN/docs/application-development/api/graph/compute"}]}</script><link rel="alternate" type="application/rss+xml" href="/geaflow-website/zh-CN/blog/rss.xml" title="GeaFlow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/geaflow-website/zh-CN/blog/atom.xml" title="GeaFlow Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="GeaFlow" href="/geaflow-website/zh-CN/opensearch.xml">





<meta name="algolia-site-verification" content="4AB782AC2021573E">
<meta property="og:image" content="https://mdn.alipayobjects.com/huamei_tu4rvn/afts/img/A*PkdvSLd2A6kAAAAAQMAAAAgAep_eAQ/original"><link rel="stylesheet" href="/geaflow-website/zh-CN/assets/css/styles.b0aa067f.css">
<script src="/geaflow-website/zh-CN/assets/js/runtime~main.189ff310.js" defer="defer"></script>
<script src="/geaflow-website/zh-CN/assets/js/main.73527d31.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/geaflow-website/zh-CN/img/logo.png"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/geaflow-website/zh-CN/"><div class="navbar__logo"><img src="/geaflow-website/zh-CN/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/geaflow-website/zh-CN/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="versionSelect_qA4O"><div class="versions_jk5T"><div class="selectItem_V7J8 selectItemActive_BNvF">0.0.2</div><div class="selectItem_V7J8">0.0.1</div></div><div class="current_ORt9">0.0.2</div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link header-locale-dropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_DSK9"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>简体中文</a><ul class="dropdown__menu"><li><a href="/geaflow-website/docs/application-development/api/graph/compute" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en-US">English</a></li><li><a href="/geaflow-website/zh-CN/docs/zh/application-development/api/graph/compute" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh-CN">简体中文</a></li></ul></div><a href="https://github.com/apache/geaflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索 (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbarCenter_ZzI1"> <a aria-current="page" class="navbar__item navbar__link navbar__link--active" id="docs" href="/geaflow-website/zh-CN/docs/zh/guide">文档</a><a class="navbar__item navbar__link" id="community" href="/geaflow-website/zh-CN/community/zh/how_to_contribute">社区</a><a class="navbar__item navbar__link" href="/geaflow-website/zh-CN/download">下载</a><a class="navbar__item navbar__link" href="/geaflow-website/zh-CN/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">基金会</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">许可证</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">事件</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">隐私</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">安全</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">赞助</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">感谢</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">行为准则</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/guide">Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/quick_start/quick_start">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/concepts/glossary">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/geaflow-website/zh-CN/docs/application-development/api/overview">Development</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/overview">API</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/overview">API Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/stream/source">Stream</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/graph/traversal">Graph</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/graph/traversal">Graph Traversal Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/api/graph/compute">Graph Compute Introduction</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/dsl/overview">DSL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/connector/common">Connector</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/zh-CN/docs/application-development/chat_guide">Text2GQL Syntax Manual</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/deploy/install_guide">Deployment</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/contribution">Contribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/contacts">Contacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/zh-CN/docs/thanks">Thanks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/zh-CN/docs/reference/vs_join">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/geaflow-website/zh-CN/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">API</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Graph</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Graph Compute Introduction</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>Graph Compute Introduction</h1></header>
<p>GeaFlow provides interfaces for implementing graph computing algorithms, and static or dynamic graph computing can be performed by implementing the corresponding interfaces. Users can define specific computing logic and maximum iteration times in the compute algorithm.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-graph">Dynamic Graph<a href="#dynamic-graph" class="hash-link" aria-label="Dynamic Graph的直接链接" title="Dynamic Graph的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface">Interface<a href="#interface" class="hash-link" aria-label="Interface的直接链接" title="Interface的直接链接">​</a></h3>






























<table><thead><tr><th>API</th><th>Interface Description</th><th>Input Parameter Description</th></tr></thead><tbody><tr><td>void init(IncGraphComputeContext&lt;K, VV, EV, M&gt; incGraphContext)</td><td>Graph computing initialization interface</td><td>incGraphContext: Context for incremental dynamic graph computing, where K represents the type of vertex ID, VV represents the type of vertex value, EV represents the type of edge value, and M represents the type of message to be sent</td></tr><tr><td>void evolve(K vertexId, TemporaryGraph&lt;K, VV, EV&gt; temporaryGraph)</td><td>First round iteration for incremental graph processing logic implementation</td><td>vertexId: The ID of the current vertex point, where K represents the type of vertex ID <br>temporaryGraph: Temporary incremental graph, where K represents the type of vertex ID, VV represents the type of vertex value, and EV represents the type of edge value</td></tr><tr><td>void compute(K vertexId, Iterator messageIterator)</td><td>Iterative computing interface</td><td>vertexId: The ID of the current computation point, where K represents the type of vertex ID</td></tr><tr><td>void finish(K vertexId, MutableGraph&lt;K, VV, EV&gt; mutableGraph)</td><td>Iterative computing complete interface</td><td>vertexId: The ID of the current computation vertex, where K represents the type of vertex ID <br>mutableGraph: Mutable graph, where K represents the type of vertex ID, VV represents the type of vertex value, and EV represents the type of edge value</td></tr></tbody></table>
<ul>
<li>Detailed interface</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public interface IncVertexCentricFunction&lt;K, VV, EV, M&gt; extends Function {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   void evolve(K vertexId, TemporaryGraph&lt;K, VV, EV&gt; temporaryGraph);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   void compute(K vertexId, Iterator&lt;M&gt; messageIterator);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   void finish(K vertexId, MutableGraph&lt;K, VV, EV&gt; mutableGraph);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interface IncGraphContext&lt;K, VV, EV, M&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       /** Get job id. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">       long getJobId();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the current iterartion id. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        long getIterationId();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the runtime context. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        RuntimeContext getRuntimeContext();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the mutable graph. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        MutableGraph&lt;K, VV, EV&gt; getMutableGraph();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    	/** Get the temporary graph. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        TemporaryGraph&lt;K, VV, EV&gt; getTemporaryGraph();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the historical graph. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        HistoricalGraph&lt;K, VV, EV&gt; getHistoricalGraph();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Send message to specified vertex. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        void sendMessage(K vertexId, M message);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Send message to neighbors of current vertex. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        void sendMessageToNeighbors(M message);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interface TemporaryGraph&lt;K, VV, EV&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Get vertex from temporary graph. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   IVertex&lt;K, VV&gt; getVertex();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the edges from incremental graph. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        List&lt;IEdge&lt;K, EV&gt;&gt; getEdges();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Update vertex value. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        void updateVertexValue(VV value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interface HistoricalGraph&lt;K, VV, EV&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Get the latest version id of graph state. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   Long getLatestVersionId();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get all versions of graph state. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        List&lt;Long&gt; getAllVersionIds();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get all vertices. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Map&lt;Long, IVertex&lt;K, VV&gt;&gt; getAllVertex();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get the all vertices of specified version. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Map&lt;Long, IVertex&lt;K, VV&gt;&gt; getAllVertex(List&lt;Long&gt; versions);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get vertices of the graph data of a specified version that meet the filtering condition. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Map&lt;Long, IVertex&lt;K, VV&gt;&gt; getAllVertex(List&lt;Long&gt; versions, IVertexFilter&lt;K, VV&gt; vertexFilter);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        /** Get snapshot of the graph data of a specified version. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        GraphSnapShot&lt;K, VV, EV&gt; getSnapShot(long version);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interface GraphSnapShot&lt;K, VV, EV&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Get the current version id. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   long getVersion();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Get vertex. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   VertexQuery&lt;K, VV&gt; vertex();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Get edges. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   EdgeQuery&lt;K, EV&gt; edges();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   interface MutableGraph&lt;K, VV, EV&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Add a vertex to the graph and specify its version ID. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   void addVertex(long version, IVertex&lt;K, VV&gt; vertex);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   /** Add a edge to the graph and specify its version ID. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   void addEdge(long version, IEdge&lt;K, EV&gt; edge);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">public interface IncVertexCentricComputeFunction&lt;K, VV, EV, M&gt; extends</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        IncVertexCentricFunction&lt;K, VV, EV, M&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void init(IncGraphComputeContext&lt;K, VV, EV, M&gt; incGraphContext);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    interface IncGraphComputeContext&lt;K, VV, EV, M&gt; extends IncGraphContext&lt;K, VV, EV, M&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        void collect(IVertex&lt;K, VV&gt; vertex);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class IncrGraphCompute {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   private static final Logger LOGGER = LoggerFactory.getLogger(IncrGraphCompute.class);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      Environment environment = EnvironmentFactory.onLocalEnvironment();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      IPipelineResult result = submit(environment);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      result.get();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      environment.shutdown();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      final Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      final String graphName = &quot;graph_view_name&quot;;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      GraphViewDesc graphViewDesc = GraphViewBuilder.createGraphView(graphName)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              .withShardNum(4)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              .withBackend(BackendType.RocksDB)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              .withSchema(new GraphMetaType(IntegerType.INSTANCE, ValueVertex.class, Integer.class, ValueEdge.class, IntegerType.class))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">              .build();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      pipeline.withView(graphName, graphViewDesc);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      pipeline.submit(new PipelineTask() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         public void execute(IPipelineTaskContext pipelineTaskCxt) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            Configuration conf = pipelineTaskCxt.getConfig();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PWindowSource&lt;IVertex&lt;Integer, Integer&gt;&gt; vertices =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    // Extract vertex from edge file.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pipelineTaskCxt.buildSource(new RecoverableFileSource&lt;&gt;(&quot;data/input/email_edge&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            line -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               IVertex&lt;Integer, Integer&gt; vertex1 = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       Integer.valueOf(fields[0]), 1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               IVertex&lt;Integer, Integer&gt; vertex2 = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               return Arrays.asList(vertex1, vertex2);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            }), SizeTumblingWindow.of(10000));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PWindowSource&lt;IEdge&lt;Integer, Integer&gt;&gt; edges =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    pipelineTaskCxt.buildSource( new RecoverableFileSource&lt;&gt;(&quot;data/input/email_edge&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            line -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               IEdge&lt;Integer, Integer&gt; edge = new ValueEdge&lt;&gt;(Integer.valueOf(fields[0]),</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                                       Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               return Collections.singletonList(edge);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            }), SizeTumblingWindow.of(5000));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PGraphView&lt;Integer, Integer, Integer&gt; fundGraphView = pipelineTaskCxt.getGraphView(graphName);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PIncGraphView&lt;Integer, Integer, Integer&gt; incGraphView = fundGraphView.appendGraph(vertices, edges);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            incGraphView.incrementalCompute(new IncGraphAlgorithms(3))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    .getVertices()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    .map(v -&gt; String.format(&quot;%s,%s&quot;, v.getId(), v.getValue()))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    .sink(v -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                       LOGGER.info(&quot;result: {}&quot;, v);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      return pipeline.execute();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   public static class IncGraphAlgorithms extends IncVertexCentricCompute&lt;Integer, Integer, Integer, Integer&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      public IncGraphAlgorithms(long iterations) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         super(iterations);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      public IncVertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt; getIncComputeFunction() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         return new IncVertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt;() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            private IncGraphComputeContext&lt;Integer, Integer, Integer, Integer&gt; graphContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            public void init(IncGraphComputeContext&lt;Integer, Integer, Integer, Integer&gt; graphContext) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               this.graphContext = graphContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            public void evolve(Integer vertexId,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                               TemporaryGraph&lt;Integer, Integer, Integer&gt; temporaryGraph) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               IVertex&lt;Integer, Integer&gt; vertex = temporaryGraph.getVertex();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               if (vertex != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  if (temporaryGraph.getEdges() != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     for (IEdge&lt;Integer, Integer&gt; edge : temporaryGraph.getEdges()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        graphContext.sendMessage(edge.getTargetId(), vertexId);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                     }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            public void compute(Integer vertexId, Iterator&lt;Integer&gt; messageIterator) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               int max = 0;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               while (messageIterator.hasNext()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  int value = messageIterator.next();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                  max = Math.max(max, value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               graphContext.getTemporaryGraph().updateVertexValue(max);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            public void finish(Integer vertexId, MutableGraph&lt;Integer, Integer, Integer&gt; mutableGraph) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               IVertex&lt;Integer, Integer&gt; vertex = graphContext.getTemporaryGraph().getVertex();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">               graphContext.collect(vertex);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      public VertexCentricCombineFunction&lt;Integer&gt; getCombineFunction() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">         return null;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="static-graph">Static Graph<a href="#static-graph" class="hash-link" aria-label="Static Graph的直接链接" title="Static Graph的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="interface-1">Interface<a href="#interface-1" class="hash-link" aria-label="Interface的直接链接" title="Interface的直接链接">​</a></h3>

























<table><thead><tr><th>API</th><th>Interface Description</th><th>Input Parameter Description</th></tr></thead><tbody><tr><td>void init(VertexCentricComputeFuncContext&lt;K, VV, EV, M&gt; vertexCentricFuncContext)</td><td>Iterative computing initialization interface</td><td>vertexCentricFuncContext: Context for static graph computing, where K represents the type of vertex ID, VV represents the type of vertex value, EV represents the type of edge value, and M represents the type of message to be sent</td></tr><tr><td>void compute(K vertexId, Iterator messageIterator)</td><td>Iterative computing interface</td><td>vertexId: The ID of the current computation vertex, where K represents the type of vertex ID <br>messageIterator: All messages sent to the current vertex during iteration, where M represents the type of message defined during iterative computing</td></tr><tr><td>void finish()</td><td>Iterative computing complete interface</td><td>no</td></tr></tbody></table>
<ul>
<li>Detailed interface</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public interface VertexCentricComputeFunction&lt;K, VV, EV, M&gt; extends VertexCentricFunction&lt;K, VV,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">EV, M&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void init(VertexCentricComputeFuncContext&lt;K, VV, EV, M&gt; vertexCentricFuncContext);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void compute(K vertex, Iterator&lt;M&gt; messageIterator);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    void finish();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    interface VertexCentricComputeFuncContext&lt;K, VV, EV, M&gt; extends VertexCentricFuncContext&lt;K, VV,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        EV, M&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    	/** Set new vertex value. */</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        void setNewVertexValue(VV value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-1">Example<a href="#example-1" class="hash-link" aria-label="Example的直接链接" title="Example的直接链接">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">public class StaticsGraphCompute {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      	Environment environment = EnvironmentFactory.onLocalEnvironment();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        IPipelineResult result = submit(environment);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        result.get();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        environment.shutdown();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        pipeline.submit((PipelineTask) pipelineTaskCxt -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PWindowSource&lt;IVertex&lt;Integer, Integer&gt;&gt; prVertices =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                pipelineTaskCxt.buildSource(new FileSource&lt;&gt;(&quot;data/input/email_vertex&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    line -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        IVertex&lt;Integer, Integer&gt; vertex = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            Integer.valueOf(fields[0]), Integer.valueOf(fields[1]));</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        return Collections.singletonList(vertex);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    }), AllWindow.getInstance())</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    .withParallelism(2);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PWindowSource&lt;IEdge&lt;Integer, Integer&gt;&gt; prEdges = pipelineTaskCxt.buildSource(new FileSource&lt;&gt;(</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;data/input/email_edge&quot;, line -&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                IEdge&lt;Integer, Integer&gt; edge = new ValueEdge&lt;&gt;(Integer.valueOf(fields[0]), Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                return Collections.singletonList(edge);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }), AllWindow.getInstance()).withParallelism(2);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            GraphViewDesc graphViewDesc = GraphViewBuilder</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .createGraphView(GraphViewBuilder.DEFAULT_GRAPH)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .withShardNum(2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .withBackend(BackendType.Memory)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            PGraphWindow&lt;Integer, Integer, Integer&gt; graphWindow =</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                pipelineTaskCxt.buildWindowStreamGraph(prVertices, prEdges, graphViewDesc);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            graphWindow.compute(new SSSPAlgorithm(1, 10))</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .compute(2)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .getVertices()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                .sink(v -&gt; {});</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        return pipeline.execute();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    public static class SSSPAlgorithm extends VertexCentricCompute&lt;Integer, Integer, Integer, Integer&gt; {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        private final int srcId;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public SSSPAlgorithm(int srcId, long iterations) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            super(iterations);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            this.srcId = srcId;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public VertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt; getComputeFunction() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return new VertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt;() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                private VertexCentricComputeFuncContext&lt;Integer, Integer, Integer, Integer&gt; context;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                public void init(VertexCentricComputeFuncContext&lt;Integer, Integer, Integer, Integer&gt; vertexCentricFuncContext) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    this.context = vertexCentricFuncContext;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                public void compute(Integer vertex, Iterator&lt;Integer&gt; messageIterator) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    int minDistance = vertex == srcId ? 0 : Integer.MAX_VALUE;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    if (messageIterator != null) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        while (messageIterator.hasNext()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            Integer value = messageIterator.next();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            minDistance = Math.min(minDistance, value);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    IVertex&lt;Integer, Integer&gt; iVertex = this.context.vertex().get();</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    if (minDistance &lt; iVertex.getValue()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        this.context.setNewVertexValue(minDistance);</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        for (IEdge&lt;Integer, Integer&gt; edge : this.context.edges().getOutEdges()) {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                            this.context.sendMessage(edge.getTargetId(), minDistance + edge.getValue());</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                public void finish() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        public VertexCentricCombineFunction&lt;Integer&gt; getCombineFunction() {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/geaflow-website/zh-CN/docs/application-development/api/graph/traversal"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Graph Traversal Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/geaflow-website/zh-CN/docs/application-development/dsl/overview"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Hybrid-DSL Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dynamic-graph" class="table-of-contents__link toc-highlight">Dynamic Graph</a><ul><li><a href="#interface" class="table-of-contents__link toc-highlight">Interface</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#static-graph" class="table-of-contents__link toc-highlight">Static Graph</a><ul><li><a href="#interface-1" class="table-of-contents__link toc-highlight">Interface</a></li><li><a href="#example-1" class="table-of-contents__link toc-highlight">Example</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/zh-CN/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/zh-CN/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>