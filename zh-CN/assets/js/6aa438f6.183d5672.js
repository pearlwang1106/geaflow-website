"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4086],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var r=s(96540);const t={},i=r.createContext(t);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},87522:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"quick_start/quick_start_sql_to_graph","title":"quick_start_sql_to_graph","description":"Using SQL for Graph Queries","source":"@site/versions/version-current/docs-en/source/3.quick_start/4.quick_start_sql_to_graph.md","sourceDirName":"3.quick_start","slug":"/quick_start/quick_start_sql_to_graph","permalink":"/geaflow-website/zh-CN/docs/quick_start/quick_start_sql_to_graph","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Quick Start (Running near line inference with UDF)","permalink":"/geaflow-website/zh-CN/docs/quick_start/quick_start_infer&UDF"},"next":{"title":"Glossary","permalink":"/geaflow-website/zh-CN/docs/concepts/glossary"}}');var t=s(74848),i=s(28453);const o={},a=void 0,l={},d=[{value:"Using SQL for Graph Queries",id:"using-sql-for-graph-queries",level:2},{value:"Joining Vertices and Edges in a Graph with SQL",id:"joining-vertices-and-edges-in-a-graph-with-sql",level:3},{value:"Using SQL to Perform Join and Aggregate Queries on Graph Vertices and Edges",id:"using-sql-to-perform-join-and-aggregate-queries-on-graph-vertices-and-edges",level:2}];function c(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"using-sql-for-graph-queries",children:"Using SQL for Graph Queries"}),"\n",(0,t.jsx)(n.h3,{id:"joining-vertices-and-edges-in-a-graph-with-sql",children:"Joining Vertices and Edges in a Graph with SQL"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Run the shell to submit the pre-edited demo GQL:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"bin/gql_submit.sh --gql geaflow/geaflow-examples/gql/sql_join_to_graph_demo.sql\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Here, ",(0,t.jsx)(n.code,{children:"sql_join_to_graph_demo.sql"})," is an SQL Join query in a simulated streaming graph. Its key content is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"USE GRAPH dy_modern;\n\nselect u.name, friend.name\nfrom person u, knows e, person friend\nwhere u.id = e.srcId and e.targetId = friend.id\n;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This DSL reads node and edge data from the ",(0,t.jsx)(n.strong,{children:"demo_job_data.txt"})," resource file within the project to construct the graph."]}),"\n",(0,t.jsxs)(n.p,{children:["Then, it performs a join query on nodes and edges of the graph ",(0,t.jsx)(n.code,{children:"dy_modern"}),". The engine automatically translates the join semantics into a graph query."]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Output Results"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can print the contents of the result file by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cat /tmp/geaflow/sql_join_to_graph_demo_result/partition_0  \n"})}),"\n",(0,t.jsxs)(n.p,{children:["The query results are written to ",(0,t.jsx)(n.code,{children:"/tmp/geaflow/sql_join_to_graph_demo_result"})," by default. Users can also customize the output path by modifying the ",(0,t.jsx)(n.code,{children:"geaflow.dsl.file.path"})," parameter."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"jim,jim\nkate,kate\nlily,lily\nlucy,lucy\njim,jim\nlucy,lucy\nlucy,lucy\njack,jack\n"})}),"\n",(0,t.jsx)(n.h2,{id:"using-sql-to-perform-join-and-aggregate-queries-on-graph-vertices-and-edges",children:"Using SQL to Perform Join and Aggregate Queries on Graph Vertices and Edges"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Run the shell to submit the pre-edited demo GQL:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"bin/gql_submit.sh --gql geaflow/geaflow-examples/gql/sql_join_to_graph_demo_02.sql\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The key content of the ",(0,t.jsx)(n.code,{children:"sql_join_to_graph_demo_02.sql"})," file is as follows:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-sql",children:"USE GRAPH dy_modern;\n\nSELECT    u.name,\n          friend_num\nFROM      person u,\n          (\n          SELECT    srcId AS pid,\n                    COUNT(DISTINCT targetId) AS friend_num\n          FROM      knows\n          GROUP BY  srcId\n          ) t_friend_num\nWHERE     u.id = pid;\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This DSL reads node and edge data from the ",(0,t.jsx)(n.strong,{children:"demo_job_data.txt"})," resource file within the project to construct the graph."]}),"\n",(0,t.jsxs)(n.p,{children:["Then, it performs a join query on nodes and edges of the graph ",(0,t.jsx)(n.code,{children:"dy_modern"}),". The engine automatically translates the join semantics into a graph query."]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Output Results"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"You can print the contents of the result file by running the following command:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cat /tmp/geaflow/sql_join_to_graph_demo_02_result/partition_0  \n"})}),"\n",(0,t.jsxs)(n.p,{children:["The query results are written to ",(0,t.jsx)(n.code,{children:"/tmp/geaflow/sql_join_to_graph_demo_02_result"})," by default. Users can also customize the output path by modifying the ",(0,t.jsx)(n.code,{children:"geaflow.dsl.file.path"})," parameter."]}),"\n",(0,t.jsx)(n.p,{children:"The results show the number of friends recorded for each person in the graph:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"lucy,2\njim,1\nkate,1\nlily,1\njack,1\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);