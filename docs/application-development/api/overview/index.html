<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper plugin-docs plugin-id-en-current docs-version-current docs-doc-page docs-doc-id-application-development/api/overview" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">API Introduction | GeaFlow</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kaiming-l.github.io/geaflow-website/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kaiming-l.github.io/geaflow-website/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/overview"><meta data-rh="true" property="og:locale" content="en_US"><meta data-rh="true" property="og:locale:alternate" content="zh_CN"><meta data-rh="true" name="docusaurus_locale" content="en-US"><meta data-rh="true" name="docsearch:language" content="en-US"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-en-current-current"><meta data-rh="true" property="og:title" content="API Introduction | GeaFlow"><meta data-rh="true" name="description" content="GeaFlow API is a development interface provided for advanced users, which supports two types of APIs"><meta data-rh="true" property="og:description" content="GeaFlow API is a development interface provided for advanced users, which supports two types of APIs"><link data-rh="true" rel="icon" href="/geaflow-website/img/favicon.png"><link data-rh="true" rel="canonical" href="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/overview"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/overview" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/zh-CN/docs/application-development/api/overview" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://kaiming-l.github.io/geaflow-website/docs/application-development/api/overview" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://HO4M21RAQI-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"API Introduction","item":"https://kaiming-l.github.io/geaflow-website/docs/application-development/api/overview"}]}</script><link rel="alternate" type="application/rss+xml" href="/geaflow-website/blog/rss.xml" title="GeaFlow RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/geaflow-website/blog/atom.xml" title="GeaFlow Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="GeaFlow" href="/geaflow-website/opensearch.xml">





<meta name="algolia-site-verification" content="4AB782AC2021573E">
<script src="https://tarptaeya.github.io/repo-card/repo-card.js"></script><link rel="stylesheet" href="/geaflow-website/assets/css/styles.aa1a495a.css">
<script src="/geaflow-website/assets/js/runtime~main.b89b6387.js" defer="defer"></script>
<script src="/geaflow-website/assets/js/main.eb63190f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/geaflow-website/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/geaflow-website/"><div class="navbar__logo"><img src="/geaflow-website/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/geaflow-website/img/logo.png" alt="GeaFlow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="ant-select ant-select-borderless versionSelect_qA4O css-l9pxc0 ant-select-single ant-select-show-arrow"><div class="ant-select-selector"><span class="ant-select-selection-wrap"><span class="ant-select-selection-search"><input type="search" autocomplete="off" class="ant-select-selection-search-input" role="combobox" aria-expanded="false" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" readonly="" unselectable="on" style="opacity:0" value=""></span><span class="ant-select-selection-item" title="0.0.2">0.0.2</span></span></div><span class="ant-select-arrow" style="user-select:none;-webkit-user-select:none" unselectable="on" aria-hidden="true"><span role="img" aria-label="down" class="anticon anticon-down ant-select-suffix"><svg viewBox="64 64 896 896" focusable="false" data-icon="down" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"></path></svg></span></span></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link header-locale-dropdown"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/geaflow-website/docs/application-development/api/overview" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en-US">English</a></li><li><a href="/geaflow-website/zh-CN/docs/application-development/api/overview" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-CN">简体中文</a></li></ul></div><a href="https://github.com/apache/geaflow" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="navbarSearchContainer_dCNk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div class="navbarCenter_ZzI1"> <a aria-current="page" class="navbar__item navbar__link navbar__link--active" id="docs" href="/geaflow-website/docs/guide">Docs</a><a class="navbar__item navbar__link" id="community" href="/geaflow-website/community/how_to_contribute">Community</a><a class="navbar__item navbar__link" href="/geaflow-website/download">Download</a><a class="navbar__item navbar__link" href="/geaflow-website/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ASF</a><ul class="dropdown__menu"><li><a href="https://www.apache.org/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Foundation</a></li><li><a href="https://www.apache.org/licenses/" target="_blank" rel="noopener noreferrer" class="dropdown__link">License</a></li><li><a href="https://www.apache.org/events/current-event.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Events</a></li><li><a href="https://privacy.apache.org/policies/privacy-policy-public.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Privacy</a></li><li><a href="https://www.apache.org/security/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Security</a></li><li><a href="https://www.apache.org/foundation/sponsorship.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Sponsorship</a></li><li><a href="https://www.apache.org/foundation/thanks.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Thanks</a></li><li><a href="https://www.apache.org/foundation/policies/conduct.html" target="_blank" rel="noopener noreferrer" class="dropdown__link">Code of Conduct</a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/docs/guide">Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/docs/quick_start/quick_start">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/docs/concepts/glossary">Concepts</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/geaflow-website/docs/application-development/api/overview">Development</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/geaflow-website/docs/application-development/api/overview">API</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/geaflow-website/docs/application-development/api/overview">API Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/docs/application-development/api/stream/source">Stream</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/docs/application-development/api/graph/traversal">Graph</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/docs/application-development/dsl/overview">DSL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/geaflow-website/docs/application-development/connector/common">Connector</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/geaflow-website/docs/application-development/chat_guide">Text2GQL Syntax Manual</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/docs/deploy/install_guide">Deployment</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/docs/contribution">Contribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/docs/contacts">Contacts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/geaflow-website/docs/thanks">Thanks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/geaflow-website/docs/reference/vs_join">Reference</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/geaflow-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Development</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">API</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">API Introduction</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>API Introduction</h1></header>
<p>GeaFlow API is a development interface provided for advanced users, which supports two types of APIs: Graph API and Stream API:</p>
<ul>
<li>Graph API: Graph is a first-class citizen of the GeaFlow framework. Currently, the GeaFlow framework provides a set of graph computing programming interfaces based on GraphView, including graph construction, graph computation, and traversal. In GeaFlow, both static and dynamic graphs are supported.
<ul>
<li>Static Graph API: Static graph computing API. Full graph computing or traversal can be performed based on this API.</li>
<li>Dynamic Graph API: Dynamic graph computing API. GraphView is the data abstraction of a dynamic graph in GeaFlow. Based on GraphView, dynamic graph computing or traversal can be performed. At the same time, support for Snapshot generation from GraphView is provided. The Snapshot can provide the same interface capability as the Static Graph API.
<img decoding="async" loading="lazy" alt="api_arch" src="/geaflow-website/assets/images/api_arch-34c1a2451d59849a53fc3e04e0ddfec4.jpeg" width="630" height="331" class="img_ev3q"></li>
</ul>
</li>
<li>The Stream API: GeaFlow provides a set of programming interfaces for general computing, including source construction, streaming batch computing, and sink output. In GeaFlow, both Batch and Stream are supported.
<ul>
<li>Batch API: Batch computing API, which can perform batch computation based on this API.</li>
<li>Stream API: Streaming computing API. StreamView is the data abstraction of a dynamic stream in GeaFlow. Based on StreamView, streaming computing can be performed.</li>
</ul>
</li>
</ul>
<p>From the introduction of the two types of APIs, it can be seen that GeaFlow unifies the graph view and stream view semantics through View internally. At the same time, in order to support two sets of APIs for dynamic and static computing, GeaFlow abstracts the concept of Window internally. Starting from the Source API, a Window must be included to split data windows based on the Window.</p>
<ul>
<li>For streaming or dynamic graph APIs, the Window can be split by size, and each window reads a certain size of data to achieve incremental computation.</li>
<li>For batch or static graph APIs, the Window will use the AllWindow mode, and a window will read the full amount of data to achieve full computation.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="maven-dependency">Maven Dependency<a href="#maven-dependency" class="hash-link" aria-label="Direct link to Maven Dependency" title="Direct link to Maven Dependency">​</a></h2>
<p>To develop a GeaFlow API application, you need to add maven dependencies:</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.antgroup.tugraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">geaflow-api</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.antgroup.tugraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">geaflow-pdata</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.antgroup.tugraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">geaflow-cluster</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.antgroup.tugraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">geaflow-on-local</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">com.antgroup.tugraph</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">groupId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">geaflow-pipeline</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">artifactId</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#393A34">&lt;</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain">0.1</span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">version</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token tag punctuation" style="color:#393A34">&lt;/</span><span class="token tag" style="color:#00009f">dependency</span><span class="token tag punctuation" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview-of-functions">Overview Of Functions<a href="#overview-of-functions" class="hash-link" aria-label="Direct link to Overview Of Functions" title="Direct link to Overview Of Functions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="graph-api">Graph API<a href="#graph-api" class="hash-link" aria-label="Direct link to Graph API" title="Direct link to Graph API">​</a></h3>
<p>Graph API is a first-class citizen in GeaFlow, which provides a set of graph computing programming interfaces based on GraphView, including graph construction, graph computation, and traversal. The specific API descriptions are shown in the following table:</p>
<table>
	<tbody><tr>
		<td>Type</td>
		<td>API</td>
		<td>Explanation</td>
	</tr>
	<tr>
		<td rowspan="7">Dynamic Graph</td>
		<td>PGraphView init(GraphViewDesc graphViewDesc)</td>
		<td>Initialize with graphViewDesc as input</td>
	</tr>
	<tr>
		<td>PGraphView PIncGraphView appendVertex(PWindowStream vertexStream)     </td>
		<td>Using a distributed vertex stream as the incremental set of graph vertices for GraphView</td>
	</tr>
	<tr>
		<td>PIncGraphView appendEdge(PWindowStream edgeStream)     </td>
		<td>Using a distributed edge stream as the incremental set of graph edges for GraphView</td>
	</tr>
	<tr>
		<td>PIncGraphView appendGraph(PWindowStream vertexStream, PWindowStream edgeStream)     </td>
		<td>Using a distributed vertex and edge stream as the incremental set of graph vertices/edges for GraphView</td>
	</tr>
	<tr>
		<td> PGraphTraversal incrementalTraversal(IncVertexCentricTraversal incVertexCentricTraversal)     </td>
		<td>Performing incremental graph traversal on a dynamic GraphView</td>
	</tr>
	<tr>
		<td>PGraphCompute incrementalCompute(IncVertexCentricCompute incVertexCentricCompute)     </td>
		<td>Performing incremental graph computation on a dynamic GraphView</td>
	</tr>
	<tr>
		<td>void materialize()     </td>
		<td>Storing the incremental set of points and edges from a dynamic GraphView into state </td>
	</tr>
	<tr>
		<td rowspan="7">Static Graph</td>
		<td> PGraphCompute compute(VertexCentricCompute vertexCentricCompute)</td>
		<td>Performing static graph vertex centric computation on Graph</td>
	</tr>
	<tr>
		<td> PGraphWindow compute(ScatterGatherCompute sgAlgorithm, int parallelism)     </td>
		<td>Performing static graph scatter gather computation on Graph</td>
	</tr>
	<tr>
		<td> PGraphTraversal traversal(VertexCentricTraversal vertexCentricTraversal)     </td>
		<td>Performing static graph vertex centric traversal on Graph</td>
	</tr>
	<tr>
		<td> PWindowStream getEdges()     </td>
		<td>Return a collection of edges</td>
	</tr>
	<tr>
		<td>PWindowStream getVertices()     </td>
		<td>Return a collection of vertices </td>
	</tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="stream-api">Stream API<a href="#stream-api" class="hash-link" aria-label="Direct link to Stream API" title="Direct link to Stream API">​</a></h3>
<p>The Stream API provides a set of programming interfaces for general computation, including source construction, stream and batch computing, and sink output. The specific API documentation is shown in the table below:</p>
<table>
	<tbody><tr>
		<td>Type</td>
		<td>API</td>
		<td>Explanation</td>
	</tr>
	<tr>
		<td rowspan="4">Stream</td>
		<td>PStreamView init(IViewDesc viewDesc)</td>
		<td>Initializing with a StreamViewDesc</td>
	</tr>
	<tr>
		<td>PIncStreamView append(PWindowStream windowStream)     </td>
		<td>Using distributed data as an incremental dataset for a StreamView</td>
	</tr>
	<tr>
		<td>PWindowStream reduce(ReduceFunction reduceFunction)     </td>
		<td>Performing incremental reduce aggregation on a dynamic StreamView</td>
	</tr>
	<tr>
		<td> PWindowStream aggregate(AggregateFunction aggregateFunction)     </td>
		<td>Performing incremental aggregate aggregation on a dynamic StreamView</td>
	</tr>
	<tr>
		<td rowspan="12">Batch</td>
		<td>PStreamView  PWindowStream map(MapFunction mapFunction)</td>
		<td>Performing map operation</td>
	</tr>
	<tr>
		<td>PWindowStream filter(FilterFunction filterFunction)     </td>
		<td>Performing filter operation</td>
	</tr>
	<tr>
		<td> PWindowStream flatMap(FlatMapFunction flatMapFunction)      </td>
		<td>Performing flatMap operation</td>
	</tr>
	<tr>
		<td> PWindowStream union(PStream uStream)     </td>
		<td>Performing union merge on two streams</td>
	</tr>
	<tr>
		<td>PWindowBroadcastStream broadcast()     </td>
		<td>Broadcasting a stream downstream</td>
	</tr>
	<tr>
		<td> PWindowKeyStream keyBy(KeySelector selectorFunction)     </td>
		<td>Performing keyby operation based on selectorFunction rules</td>
	</tr>
	<tr>
		<td>PStreamSink sink(SinkFunction sinkFunction)     </td>
		<td>Outputting the results</td>
	</tr>
	<tr>
		<td>PWindowCollect collect()     </td>
		<td>Triggering the collection of data results</td>
	</tr>
	<tr>
		<td>PWindowStream reduce(ReduceFunction reduceFunction)     </td>
		<td>Performing a reduce aggregation calculation within a window</td>
	</tr>
	<tr>
		<td> PWindowStream aggregate(AggregateFunction aggregateFunction)     </td>
		<td>Performing a aggregate aggregation calculation within a window</td>
	</tr>
	<tr>
		<td> PIncStreamView materialize()     </td>
		<td>Using a PWindowKeyStream as a dynamic StreamView and generating an IncStreamView after default keyby</td>
	</tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="typical-example">Typical Example<a href="#typical-example" class="hash-link" aria-label="Direct link to Typical Example" title="Direct link to Typical Example">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-pagerank-dynamic-graph-computing-example">Introduction to PageRank Dynamic Graph Computing Example<a href="#introduction-to-pagerank-dynamic-graph-computing-example" class="hash-link" aria-label="Direct link to Introduction to PageRank Dynamic Graph Computing Example" title="Direct link to Introduction to PageRank Dynamic Graph Computing Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="the-definition-of-pagerank">The Definition Of PageRank<a href="#the-definition-of-pagerank" class="hash-link" aria-label="Direct link to The Definition Of PageRank" title="Direct link to The Definition Of PageRank">​</a></h4>
<p>PageRank algorithm was originally used to calculate the importance of Internet pages. It was proposed by Page and Brin in 1996 and used in the ranking of web pages in Google search engine. In fact, PageRank can be defined on any digraph and later applied to many problems such as social influence analysis, text summary and so on.
Assuming that the Internet is a directed graph, the random walk model is defined on the basis of which, namely, the first-order Markov chain, represents the process of web page visitors browsing the web pages randomly on the Internet. It is assumed that the viewer jumps to the next page with equal probability according to the hyperlink connected out in each page, and continues to carry out such a random jump on the Internet, this process forms a first-order Markov chain. PageRank represents the smooth distribution of this Markov chain. The PageRank value of each page is the stationary probability.
The implementation of the algorithm is as follows: 1. Assume that the initial influence value of each point in the figure is the same; 2. 2. Calculate the jump probability of each point to other points, and update the influence value of the point; 3. Perform n iterations until the influence value of each point no longer changes, that is the convergence state.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-code">Example Code<a href="#example-code" class="hash-link" aria-label="Direct link to Example Code" title="Direct link to Example Code">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class IncrGraphCompute {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(IncrGraphCompute.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Computed result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String RESULT_FILE_PATH = &quot;./target/tmp/data/result/incr_graph&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Comparison result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String REF_FILE_PATH = &quot;data/reference/incr_graph&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Environment environment = EnvironmentFactory.onLocalEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Perform job submission.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IPipelineResult result = submit(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Wait for execution to complete.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Close the execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		environment.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Build the task execution flow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get the job environment configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Configuration envConfig = environment.getEnvironmentContext().getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Specifies the path to save the calculation results.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envConfig.put(FileSink.OUTPUT_DIR, RESULT_FILE_PATH);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Graphview name.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        final String graphName = &quot;graph_view_name&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Create delta graph graphview.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GraphViewDesc graphViewDesc = GraphViewBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			.createGraphView(graphName)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Set the number of graphview shards, which can be specified from the configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withShardNum(envConfig.getInteger(ExampleConfigKeys.ITERATOR_PARALLELISM))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Set graphview backend type.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withBackend(BackendType.RocksDB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Specify graphview schema information such as vertices/edges and attributes.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .withSchema(new GraphMetaType(IntegerType.INSTANCE, ValueVertex.class, Integer.class, ValueEdge.class, IntegerType.class))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Add the created graphview information to the task execution flow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.withView(graphName, graphViewDesc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Submit the task and execute.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.submit(new PipelineTask() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void execute(IPipelineTaskContext pipelineTaskCxt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Configuration conf = pipelineTaskCxt.getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// 1. Build vertex data input source.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PWindowSource&lt;IVertex&lt;Integer, Integer&gt;&gt; vertices =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    // Extract vertex from edge file.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pipelineTaskCxt.buildSource(new RecoverableFileSource&lt;&gt;(&quot;data/input/email_edge&quot;,			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Specifies the parsing format for each row of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        line -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            IVertex&lt;Integer, Integer&gt; vertex1 = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                Integer.valueOf(fields[0]), 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            IVertex&lt;Integer, Integer&gt; vertex2 = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            return Arrays.asList(vertex1, vertex2);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }), SizeTumblingWindow.of(10000))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Specifies the parallelism of vertex data sources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        .withParallelism(pipelineTaskCxt.getConfig().getInteger(ExampleConfigKeys.SOURCE_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// 2. Build the edge data input source.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PWindowSource&lt;IEdge&lt;Integer, Integer&gt;&gt; edges =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pipelineTaskCxt.buildSource( new RecoverableFileSource&lt;&gt;(&quot;data/input/email_edge&quot;,			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Specifies the parsing format for each row of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        line -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            IEdge&lt;Integer, Integer&gt; edge = new ValueEdge&lt;&gt;(Integer.valueOf(fields[0]),</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            return Collections.singletonList(edge);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }), SizeTumblingWindow.of(5000))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Specifies the parallelism of edge data sources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						.withParallelism(pipelineTaskCxt.getConfig().getInteger(ExampleConfigKeys.SOURCE_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get the defined graphview and build the graph data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PGraphView&lt;Integer, Integer, Integer&gt; fundGraphView =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pipelineTaskCxt.getGraphView(graphName);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PIncGraphView&lt;Integer, Integer, Integer&gt; incGraphView =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    fundGraphView.appendGraph(vertices, edges);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get the concurrency of Map tasks running in a job.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int mapParallelism = pipelineTaskCxt.getConfig().getInteger(ExampleConfigKeys.MAP_PARALLELISM);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get the concurrency of Sink tasks running in a job.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int sinkParallelism = pipelineTaskCxt.getConfig().getInteger(ExampleConfigKeys.SINK_PARALLELISM);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Create sink method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SinkFunction&lt;String&gt; sink = ExampleSinkFunctionFactory.getSinkFunction(conf);			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Based on graph algorithm, dynamic graph calculation is performed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                incGraphView.incrementalCompute(new IncGraphAlgorithms(3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Get the result of vertices data and perform a map operation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .getVertices()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .map(v -&gt; String.format(&quot;%s,%s&quot;, v.getId(), v.getValue()))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(mapParallelism)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .sink(sink)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(sinkParallelism);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return pipeline.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Implement Pagerank dynamic graph algorithm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class IncGraphAlgorithms extends IncVertexCentricCompute&lt;Integer, Integer,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Integer, Integer&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public IncGraphAlgorithms(long iterations) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Set the maximum number of iterations for the algorithm.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            super(iterations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public IncVertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt; getIncComputeFunction() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Specify the Pagerank calculation logic.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new PRVertexCentricComputeFunction();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public VertexCentricCombineFunction&lt;Integer&gt; getCombineFunction() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class PRVertexCentricComputeFunction implements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IncVertexCentricComputeFunction&lt;Integer, Integer, Integer, Integer&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private IncGraphComputeContext&lt;Integer, Integer, Integer, Integer&gt; graphContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Init method, set graphContext.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void init(IncGraphComputeContext&lt;Integer, Integer, Integer, Integer&gt; graphContext) {	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            this.graphContext = graphContext;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// The first round of iteration implementation of the evolve method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void evolve(Integer vertexId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           TemporaryGraph&lt;Integer, Integer, Integer&gt; temporaryGraph) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Set the dynamic graph version to 0.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            long lastVersionId = 0L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the vertex whose ID is equal to vertexId from the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IVertex&lt;Integer, Integer&gt; vertex = temporaryGraph.getVertex();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the historical base graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            HistoricalGraph&lt;Integer, Integer, Integer&gt; historicalGraph = graphContext</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .getHistoricalGraph();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (vertex == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// If there is no vertex with ID equal to vertexId in the incremental graph, get it from the historical graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                vertex = historicalGraph.getSnapShot(lastVersionId).vertex().get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (vertex != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get all the outgoing edges corresponding to a vertex from the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                List&lt;IEdge&lt;Integer, Integer&gt;&gt; newEs = temporaryGraph.getEdges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get all the outgoing edges corresponding to a vertex from the historical graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                List&lt;IEdge&lt;Integer, Integer&gt;&gt; oldEs = historicalGraph.getSnapShot(lastVersionId)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .edges().getOutEdges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (newEs != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for (IEdge&lt;Integer, Integer&gt; edge : newEs) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Send a message with the content of vertexId to the targetId of all edges in the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        graphContext.sendMessage(edge.getTargetId(), vertexId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (oldEs != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    for (IEdge&lt;Integer, Integer&gt; edge : oldEs) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Send a message with the content of vertexId to the targetId of all edges in the historical graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        graphContext.sendMessage(edge.getTargetId(), vertexId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void compute(Integer vertexId, Iterator&lt;Integer&gt; messageIterator) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int max = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Iterate through all messages received by vertexId and take the maximum value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            while (messageIterator.hasNext()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                int value = messageIterator.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max = max &gt; value ? max : value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the vertex whose ID is equal to vertexId from the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IVertex&lt;Integer, Integer&gt; vertex = graphContext.getTemporaryGraph().getVertex();		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the vertex whose ID is equal to vertexId from the historical graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IVertex&lt;Integer, Integer&gt; historyVertex = graphContext.getHistoricalGraph().getSnapShot(0).vertex().get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Take the maximum value between the attribute value of a vertex in the incremental graph and the maximum value of the messages.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (vertex != null &amp;&amp; max &lt; vertex.getValue()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max = vertex.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Take the maximum value between the attribute value of a vertex in the historical graph and the maximum value of the messages.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (historyVertex != null &amp;&amp; max &lt; historyVertex.getValue()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                max = historyVertex.getValue();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Update the attribute value of a vertex in the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            graphContext.getTemporaryGraph().updateVertexValue(max);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void finish(Integer vertexId, MutableGraph&lt;Integer, Integer, Integer&gt; mutableGraph) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the vertices and edges related to vertexId from the incremental graph.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IVertex&lt;Integer, Integer&gt; vertex = graphContext.getTemporaryGraph().getVertex();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            List&lt;IEdge&lt;Integer, Integer&gt;&gt; edges = graphContext.getTemporaryGraph().getEdges();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (vertex != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Add the vertices in the incremental graph to the graph data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                mutableGraph.addVertex(0, vertex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                graphContext.collect(vertex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                LOGGER.info(&quot;not found vertex {} in temporaryGraph &quot;, vertexId);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (edges != null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Add the edges in the incremental graph to the graph data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                edges.stream().forEach(edge -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    mutableGraph.addEdge(0, edge);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-pagerank-static-graph-computing-example">Introduction to PageRank Static Graph Computing Example<a href="#introduction-to-pagerank-static-graph-computing-example" class="hash-link" aria-label="Direct link to Introduction to PageRank Static Graph Computing Example" title="Direct link to Introduction to PageRank Static Graph Computing Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-code-1">Example Code<a href="#example-code-1" class="hash-link" aria-label="Direct link to Example Code" title="Direct link to Example Code">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class PageRank {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(PageRank.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Computed result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String RESULT_FILE_PATH = &quot;./target/tmp/data/result/pagerank&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Comparison result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String REF_FILE_PATH = &quot;data/reference/pagerank&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Environment environment = EnvironmentFactory.onLocalEnvironment();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Perform job submission.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IPipelineResult&lt;?&gt; result = submit(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Wait for execution to complete.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Close the execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Build the task execution flow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get the job environment configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Configuration envConfig = environment.getEnvironmentContext().getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Specifies the path to save the calculation results.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envConfig.put(FileSink.OUTPUT_DIR, RESULT_FILE_PATH);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Submit the task and execute.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.submit((PipelineTask) pipelineTaskCxt -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Configuration conf = pipelineTaskCxt.getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// 1. Build vertex data input source.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PWindowSource&lt;IVertex&lt;Integer, Double&gt;&gt; prVertices =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pipelineTaskCxt.buildSource(new FileSource&lt;&gt;(&quot;data/input/email_vertex&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Specifies the parsing format for each row of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    line -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        IVertex&lt;Integer, Double&gt; vertex = new ValueVertex&lt;&gt;(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Integer.valueOf(fields[0]), Double.valueOf(fields[1]));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        return Collections.singletonList(vertex);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }), AllWindow.getInstance())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Specifies the parallelism of vertex data sources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(conf.getInteger(ExampleConfigKeys.SOURCE_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// 2. Build the edge data input source.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PWindowSource&lt;IEdge&lt;Integer, Integer&gt;&gt; prEdges = pipelineTaskCxt.buildSource(new FileSource&lt;&gt;(&quot;data/input/email_edge&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Specifies the parsing format for each row of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                line -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    IEdge&lt;Integer, Integer&gt; edge = new ValueEdge&lt;&gt;(Integer.valueOf(fields[0]), Integer.valueOf(fields[1]), 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    return Collections.singletonList(edge);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }), AllWindow.getInstance())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Specifies the parallelism of edge data sources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withParallelism(conf.getInteger(ExampleConfigKeys.SOURCE_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// The parallelism of iteration computation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            int iterationParallelism = conf.getInteger(ExampleConfigKeys.ITERATOR_PARALLELISM);		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Define graphview.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            GraphViewDesc graphViewDesc = GraphViewBuilder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .createGraphView(GraphViewBuilder.DEFAULT_GRAPH)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Specify the number of shards as 2.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withShardNum(2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Specify the backend type as memory.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withBackend(BackendType.Memory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Build a static graph based on vertex/edge data and the defined graph view.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            PGraphWindow&lt;Integer, Double, Integer&gt; graphWindow =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                pipelineTaskCxt.buildWindowStreamGraph(prVertices, prEdges, graphViewDesc);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Create sink method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            SinkFunction&lt;IVertex&lt;Integer, Double&gt;&gt; sink = ExampleSinkFunctionFactory.getSinkFunction(conf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Specify the computation concurrency and execute the static computation method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            graphWindow.compute(new PRAlgorithms(3))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .compute(iterationParallelism)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Get the computed vertices result and output them according to the defined sink function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .getVertices()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .sink(sink)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                .withParallelism(conf.getInteger(ExampleConfigKeys.SINK_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return pipeline.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class PRAlgorithms extends VertexCentricCompute&lt;Integer, Double, Integer, Double&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public PRAlgorithms(long iterations) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Specify the iteration number for static graph computation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            super(iterations);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public VertexCentricComputeFunction&lt;Integer, Double, Integer, Double&gt; getComputeFunction() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return new PRVertexCentricComputeFunction();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public VertexCentricCombineFunction&lt;Double&gt; getCombineFunction() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class PRVertexCentricComputeFunction extends AbstractVcFunc&lt;Integer, Double, Integer, Double&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// The implementation of the static graph computation method.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void compute(Integer vertexId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            Iterator&lt;Double&gt; messageIterator) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Get the vertex from the static graph where the vertex ID equals vertexId.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            IVertex&lt;Integer, Double&gt; vertex = this.context.vertex().get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (this.context.getIterationId() == 1) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// In the first iteration, send messages to neighboring nodes, and the message content is the attribute value of the vertex with vertexId.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.context.sendMessageToNeighbors(vertex.getValue());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                double sum = 0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                while (messageIterator.hasNext()) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    double value = messageIterator.next();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    sum += value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Sum up the received messages and set it as the attribute value of the current vertex.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                this.context.setNewVertexValue(sum);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-wordcount-batch-computation-example">Introduction to WordCount Batch Computation Example<a href="#introduction-to-wordcount-batch-computation-example" class="hash-link" aria-label="Direct link to Introduction to WordCount Batch Computation Example" title="Direct link to Introduction to WordCount Batch Computation Example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-code-2">Example Code<a href="#example-code-2" class="hash-link" aria-label="Direct link to Example Code" title="Direct link to Example Code">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WordCountStream {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(WordCountStream.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Computed result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String RESULT_FILE_PATH = &quot;./target/tmp/data/result/wordcount&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Comparison result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String REF_FILE_PATH = &quot;data/reference/wordcount&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Environment environment = EnvironmentUtil.loadEnvironment(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Perform job submission.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IPipelineResult&lt;?&gt; result = submit(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Close the execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Build the task execution flow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get the job environment configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Configuration envConfig = environment.getEnvironmentContext().getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Turn off the materialize switch for dynamic streaming.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envConfig.getConfigMap().put(FrameworkConfigKeys.INC_STREAM_MATERIALIZE_DISABLE.getKey(), Boolean.TRUE.toString());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Specifies the path to save the calculation results.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envConfig.getConfigMap().put(FileSink.OUTPUT_DIR, RESULT_FILE_PATH);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.submit(new PipelineTask() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void execute(IPipelineTaskContext pipelineTaskCxt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Configuration conf = pipelineTaskCxt.getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Gets the input data stream.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PWindowSource&lt;String&gt; streamSource = pipelineTaskCxt.buildSource(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    new FileSource&lt;String&gt;(&quot;data/input/email_edge&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">						// Specifies the parsing format for each row of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        line -&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            String[] fields = line.split(&quot;,&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            return Collections.singletonList(fields[0]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								// Define the size of the data window.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }) {}, SizeTumblingWindow.of(5000))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Specifies the parallelism of input data sources.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(conf.getInteger(ExampleConfigKeys.SOURCE_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SinkFunction&lt;String&gt; sink = ExampleSinkFunctionFactory.getSinkFunction(conf);			</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                streamSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Perform map operation on the data in the stream.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .map(e -&gt; Tuple.of(e, 1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Key by.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .keyBy(new KeySelectorFunc())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Reduce: the aggregation to count the number of identical data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .reduce(new CountFunc())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Specify the concurrency num of the operator.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(conf.getInteger(ExampleConfigKeys.REDUCE_PARALLELISM))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .map(v -&gt; String.format(&quot;(%s,%s)&quot;, ((Tuple) v).f0, ((Tuple) v).f1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .sink(sink)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(conf.getInteger(ExampleConfigKeys.SINK_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return pipeline.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void validateResult() throws IOException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ResultValidator.validateResult(REF_FILE_PATH, RESULT_FILE_PATH);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class MapFunc implements MapFunction&lt;String, Tuple&lt;String, Integer&gt;&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Implement the map method to convert each input word to a Tuple.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Tuple&lt;String, Integer&gt; map(String value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            LOGGER.info(&quot;MapFunc process value: {}&quot;, value);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Tuple.of(value, 1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class KeySelectorFunc implements KeySelector&lt;Tuple&lt;String, Integer&gt;, Object&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Object getKey(Tuple&lt;String, Integer&gt; value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return value.f0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class CountFunc implements ReduceFunction&lt;Tuple&lt;String, Integer&gt;&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Tuple&lt;String, Integer&gt; reduce(Tuple&lt;String, Integer&gt; oldValue, Tuple&lt;String, Integer&gt; newValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Tuple.of(oldValue.f0, oldValue.f1 + newValue.f1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="introduction-to-keyagg-stream-computation-example">Introduction to KeyAgg stream computation example<a href="#introduction-to-keyagg-stream-computation-example" class="hash-link" aria-label="Direct link to Introduction to KeyAgg stream computation example" title="Direct link to Introduction to KeyAgg stream computation example">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-code-3">Example Code<a href="#example-code-3" class="hash-link" aria-label="Direct link to Example Code" title="Direct link to Example Code">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class WindowStreamKeyAgg implements Serializable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(WindowStreamKeyAgg.class);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Computed result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String RESULT_FILE_PATH = &quot;./target/tmp/data/result/wordcount&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	// Comparison result path.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static final String REF_FILE_PATH = &quot;data/reference/wordcount&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Environment environment = EnvironmentUtil.loadEnvironment(args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Perform job submission.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        IPipelineResult&lt;?&gt; result = submit(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        result.get();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Close the execution environment.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        environment.shutdown();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static IPipelineResult&lt;?&gt; submit(Environment environment) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Build the task execution flow.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Pipeline pipeline = PipelineFactory.buildPipeline(environment);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Get the job environment configuration.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Configuration envConfig = environment.getEnvironmentContext().getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Specifies the path to save the calculation results.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        envConfig.getConfigMap().put(FileSink.OUTPUT_DIR, RESULT_FILE_PATH);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pipeline.submit(new PipelineTask() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            public void execute(IPipelineTaskContext pipelineTaskCxt) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                Configuration conf = pipelineTaskCxt.getConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">				// Define the window size as 5000 and construct an input data stream.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                PWindowSource&lt;String&gt; streamSource =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    pipelineTaskCxt.buildSource(new FileSource&lt;String&gt;(&quot;data/input&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    + &quot;/email_edge&quot;, Collections::singletonList) {}, SizeTumblingWindow.of(5000));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                SinkFunction&lt;String&gt; sink = ExampleSinkFunctionFactory.getSinkFunction(conf);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                streamSource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .flatMap(new FlatMapFunction&lt;String, Long&gt;() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        public void flatMap(String value, Collector collector) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">							// Flatmap implementation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            String[] records = value.split(SPLIT);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            for (String record : records) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">								// Split and partition each line of data.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                                collector.partition(Long.valueOf(record));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    })</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Map.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .map(p -&gt; Tuple.of(p, p))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">					// Key by.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .keyBy(p -&gt; ((long) ((Tuple) p).f0) % 7)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .aggregate(new AggFunc())</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .withParallelism(conf.getInteger(AGG_PARALLELISM))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .map(v -&gt; String.format(&quot;%s,%s&quot;, ((Tuple) v).f0, ((Tuple) v).f1))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    .sink(sink).withParallelism(conf.getInteger(SINK_PARALLELISM));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return pipeline.execute();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">	</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static class AggFunc implements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        AggregateFunction&lt;Tuple&lt;Long, Long&gt;, Tuple&lt;Long, Long&gt;, Tuple&lt;Long, Long&gt;&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		// Define the accumulator implementation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Tuple&lt;Long, Long&gt; createAccumulator() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Tuple.of(0L, 0L);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">		</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public void add(Tuple&lt;Long, Long&gt; value, Tuple&lt;Long, Long&gt; accumulator) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Add up the f1 values of two values with the same key.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            accumulator.setF0(value.f0);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            accumulator.setF1(value.f1 + accumulator.f1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Tuple&lt;Long, Long&gt; getResult(Tuple&lt;Long, Long&gt; accumulator) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">			// Return the result after accumulation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return Tuple.of(accumulator.f0, accumulator.f1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        @Override</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        public Tuple&lt;Long, Long&gt; merge(Tuple&lt;Long, Long&gt; a, Tuple&lt;Long, Long&gt; b) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/geaflow-website/docs/concepts/console_principle"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">GeaFlow Console Platform</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/geaflow-website/docs/application-development/api/stream/source"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Source Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#maven-dependency" class="table-of-contents__link toc-highlight">Maven Dependency</a></li><li><a href="#overview-of-functions" class="table-of-contents__link toc-highlight">Overview Of Functions</a><ul><li><a href="#graph-api" class="table-of-contents__link toc-highlight">Graph API</a></li><li><a href="#stream-api" class="table-of-contents__link toc-highlight">Stream API</a></li></ul></li><li><a href="#typical-example" class="table-of-contents__link toc-highlight">Typical Example</a><ul><li><a href="#introduction-to-pagerank-dynamic-graph-computing-example" class="table-of-contents__link toc-highlight">Introduction to PageRank Dynamic Graph Computing Example</a></li><li><a href="#introduction-to-pagerank-static-graph-computing-example" class="table-of-contents__link toc-highlight">Introduction to PageRank Static Graph Computing Example</a></li><li><a href="#introduction-to-wordcount-batch-computation-example" class="table-of-contents__link toc-highlight">Introduction to WordCount Batch Computation Example</a></li><li><a href="#introduction-to-keyagg-stream-computation-example" class="table-of-contents__link toc-highlight">Introduction to KeyAgg stream computation example</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/geaflow-website/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>